---
interface Props {
    title?: string;
    subtitle?: string;
    meta?: string;
    imageSrc?: string;
    imageAlt?: string;
    href?: string;
    badge?: string;
    layout?: 'two-col' | 'default';
    aosDelay?: number;
}

const { title, subtitle, meta, imageSrc, imageAlt, href, badge, layout = 'default', aosDelay } = Astro.props as Props;
---
<article class={`tile-card${imageSrc ? ' has-media' : ''}${layout === 'two-col' ? ' two-col' : ''}`} data-aos="fade-up" data-aos-delay={aosDelay}>
    {imageSrc && (
        <div class="tile-media">
            <img src={imageSrc} alt={imageAlt ?? title ?? 'Tile image'} loading="lazy" />
            {badge && <span class="tile-badge">{badge}</span>}
        </div>
    )}
    <div class="tile-body">
        {meta && <div class="tile-meta">{meta}</div>}
        {title && <h3 class="tile-title">{href ? <a href={href}>{title}</a> : title}</h3>}
        {subtitle && <div class="tile-subtitle">{subtitle}</div>}
        <div class="tile-content">
            <slot />
        </div>
    </div>
</article>

<style>
    .tile-card {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        padding: 1.5rem;
    }
    .tile-media {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
    }
    .tile-media img { display: block; width: 100%; height: auto; }
    .tile-badge {
        position: absolute; bottom: 0.75rem; left: 0.75rem;
        background: linear-gradient(135deg, var(--primary, #6366f1) 0%, #764ba2 100%);
        color: #fff; padding: 0.25rem 0.6rem; border-radius: 999px; font-size: .75rem; font-weight: 600;
    }
    .tile-meta { color: #64748b; font-size: .9rem; margin-bottom: .25rem; }
    .tile-title { margin: 0 0 .25rem; font-size: 1.25rem; font-weight: 700; }
    .tile-title a { color: inherit; text-decoration: none; }
    .tile-title a:hover { text-decoration: underline; }
    .tile-subtitle { color: #64748b; font-weight: 500; margin-bottom: .5rem; }
    .tile-content { color: #334155; line-height: 1.6; }
    .tile-content ul { padding-left: 1.25rem; }
    @media (min-width: 992px) {
        .tile-card { padding: 2rem; }
        .tile-card.has-media { grid-template-columns: 1.2fr 2fr; }
        .tile-media { max-height: 240px; }
    }
    .tile-card.two-col .tile-body { display: grid; gap: 1rem; }
    @media (min-width: 992px) {
        .tile-card.two-col .tile-body { grid-template-columns: 1fr 2fr; align-items: start; }
    }
</style>

